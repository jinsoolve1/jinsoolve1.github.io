{% assign navigation = site.data.navigation[include.nav] %}

<nav class="nav__list">
  {% if page.sidebar.title %}<h3 class="nav__title" style="padding-left: 0;">{{ page.sidebar.title }}</h3>{% endif %}
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">{{ site.data.ui-text[site.locale].menu_label | default: "Toggle Menu" }}</label>
  <ul class="nav__items">
    <!-- <li>
      <span class="nav__total">ğŸŒ´ Total Posts: {{site.posts | size}}</span>
    </li> -->
    
    {% for nav in navigation %}
      <li>
        {% if nav.url %}
              <a href="{{ nav.url | relative_url }}"><span class="nav__sub-title">{{ nav.title }}</span></a>
        {% else %}
          <!-- title -->
              <span class="nav__sub-title">{{ nav.title }}</span>
              <hr>
        {% endif %}

        {% if nav.children != null %}
        <ul>
          {% for child in nav.children %}
            <!-- sub-title -->
            <li>
              {% assign child_size = child.children.size %}

              <div style="display: flex; align-items: center; justify-content: space-between;">
                <a href="{{ child.url | relative_url }}"{% if child.url == page.url %} class="active"{% endif %}>
                  {{ child.title }}
                </a>

                {% if child_size %}
                  <a href="#" class="toggle-link" onclick="toggleContent(event, '{{ child.title }}', this)" style="margin-left: auto; margin-right: auto;">
                    <span class="toggle-icon" aria-hidden="true">+</span> <!-- ê¸°ë³¸ ì•„ì´ì½˜ (í¼ì³ì§€ì§€ ì•Šì•˜ì„ ë•Œ) -->
                  </a>
                {% endif %}
              </div>

              {% if child_size %}
                <div id="{{ child.title | slugify }}" class="toggle-content" style="display: none;">
                  <ul>
                    {% for grand in child.children %}
                      <li>
                        <a href="{{ grand.url | relative_url }}"{% if grand.url == page.url %} class="active"{% endif %}>
                          {{ grand.title }}
                          {% if grand_size %}
                            ({{ grand_size }})
                          {% endif %}
                        </a>
                      </li>
                    {% endfor %}
                  </ul>
                </div>
              {% endif %}

              <style>
                .toggle-content {
                  transition: all 10.3s ease; /* ë¶€ë“œëŸ¬ìš´ ì „í™˜ íš¨ê³¼ */
                }
                .toggle-link {
                  display: flex; /* Flexbox ì‚¬ìš© */
                  align-items: center; /* ìˆ˜ì§ ì¤‘ì•™ ì •ë ¬ */
                  text-decoration: none; /* ë§í¬ì˜ ê¸°ë³¸ ë°‘ì¤„ ì œê±° */
                  color: inherit; /* í…ìŠ¤íŠ¸ ìƒ‰ìƒ ìƒì† */
                  cursor: pointer; /* ì»¤ì„œ í¬ì¸í„°ë¡œ ë³€ê²½ */
                }

                .toggle-icon {
                  font-weight: bold; /* ì•„ì´ì½˜ ê°•ì¡° */
                  line-height: 1; /* ë¼ì¸ ë†’ì´ ì¡°ì • */
                }
              </style>

              <script>
                function toggleContent(event, title, link) {
                  event.preventDefault();  // ê¸°ë³¸ ë§í¬ í´ë¦­ ë™ì‘ ë°©ì§€
                  var content = document.getElementById(title.replace(/\s+/g, '-').toLowerCase()); // IDë¡œ ì½˜í…ì¸  ì°¾ê¸°

                  // ë‚´ìš© í† ê¸€
                  if (content.style.display === "none") {
                    content.style.display = "block"; // ë³´ì´ê¸°
                    link.querySelector('.toggle-icon').textContent = "-"; // í¼ì³¤ì„ ë•Œ ì•„ì´ì½˜ ë³€ê²½
                  } else {
                    content.style.display = "none"; // ìˆ¨ê¸°ê¸°
                    link.querySelector('.toggle-icon').textContent = "+"; // í¼ì³ì§€ì§€ ì•Šì•˜ì„ ë•Œ ì•„ì´ì½˜ ë³€ê²½
                  }
                }
              </script>
            </li>



          {% endfor %}
        </ul>
        {% endif %}
      </li>
    {% endfor %}
  </ul>
</nav>
